<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RetrofitForge - Industry-Leading 3D Building Intelligence Platform</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Mapbox scripts removed - no longer needed -->
</head>
<body>
    <div class="app-container">
        <!-- Enhanced Header with Patent Status -->
        <header class="header">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo-container">
                        <img src="retrofitforge-logo.png" alt="RetrofitForge Logo" class="logo-image">
                        <h1 class="logo">RetrofitForge‚Ñ¢</h1>
                    </div>
                    <span class="tagline">Patent-Pending 3D Building Intelligence Platform</span>
                    <div class="patent-badge">üöÄ 5 Provisional Patents Filed</div>
                </div>
                <div class="status-indicators">
                    <div class="status-item">
                        <span class="status-label">STGNN Accuracy:</span>
                        <span class="status-value" id="stgnnAccuracy">96.9%</span>
                        <div class="live-dot-small"></div>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Processing Speed:</span>
                        <span class="status-value" id="processingSpeed">2.3s</span>
                        <div class="live-dot-small"></div>
                    </div>
                    <div class="status-item">
                        <span class="status-label">ROI Improvement:</span>
                        <span class="status-value" id="roiImprovement">+34.2%</span>
                        <div class="live-dot-small"></div>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Carbon Efficiency:</span>
                        <span class="status-value" id="carbonEfficiency">89%</span>
                        <div class="live-dot-small"></div>
                    </div>
                    <div class="live-indicator">
                        <div class="live-dot"></div>
                        <span>LIVE AI ANALYSIS</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Slideshow Progress Indicator -->
        <div class="slideshow-progress" id="slideshowProgress">
            <div class="slide-indicator" data-slide="0"></div>
            <div class="slide-indicator" data-slide="1"></div>
            <div class="slide-indicator" data-slide="2"></div>
            <div class="slide-indicator" data-slide="3"></div>
            <div class="slide-indicator" data-slide="4"></div>
            <div class="slide-indicator" data-slide="5"></div>
            <div class="slide-indicator" data-slide="6"></div>
        </div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Enhanced Sidebar Controls -->
            <aside class="sidebar">
                <div class="section-info">
                    <h3 class="section-title">Section <span id="currentSectionNum">1</span>/7</h3>
                    <h2 class="section-name" id="currentSectionName">Advanced STGNNs for Property Performance Forecasting</h2>
                    <p class="section-description" id="currentSectionDesc">Spatio-Temporal Graph Neural Networks with 96.9% accuracy for real-time property performance prediction and investment optimization.</p>
                </div>

                <!-- Enhanced Segmentation Controls -->
                <div class="segmentation-controls">
                    <h4>Physics-Aware RANSAC‚Ñ¢</h4>
                    <div class="control-group">
                        <label for="ransacDistance">Thermal-Fluid Distance: <span id="ransacValue">0.02</span></label>
                        <input type="range" id="ransacDistance" min="0.01" max="0.1" step="0.01" value="0.02">
                    </div>
                    <div class="control-group">
                        <label for="dbscanEps">DBSCAN Epsilon: <span id="dbscanValue">0.05</span></label>
                        <input type="range" id="dbscanEps" min="0.01" max="0.2" step="0.01" value="0.05">
                    </div>
                    <div class="control-group">
                        <label for="minPoints">Min Points: <span id="minPointsValue">100</span></label>
                        <input type="range" id="minPoints" min="50" max="500" step="50" value="100">
                    </div>
                    <div class="control-group">
                        <label for="uncertaintyThreshold">Bayesian Uncertainty: <span id="uncertaintyValue">0.15</span></label>
                        <input type="range" id="uncertaintyThreshold" min="0.05" max="0.5" step="0.05" value="0.15">
                    </div>
                </div>

                <!-- Enhanced Component Filters -->
                <div class="component-filters">
                    <h4>Climate-Aware Components</h4>
                    <div class="filter-buttons">
                        <button class="filter-btn active" data-segment="all">All Components</button>
                        <button class="filter-btn" data-segment="walls">High-Loss Walls</button>
                        <button class="filter-btn" data-segment="roof">Solar-Ready Roof</button>
                        <button class="filter-btn" data-segment="windows">Thermal Windows</button>
                        <button class="filter-btn" data-segment="hvac">Smart HVAC</button>
                        <button class="filter-btn" data-segment="floor">Insulated Floor</button>
                    </div>
                </div>

                <!-- ROI & Business Metrics -->
                <div class="roi-metrics">
                    <h4>STGNN Investment Optimization‚Ñ¢ <span class="live-indicator-small">‚óè LIVE</span></h4>
                    <div class="metric-item">
                        <span class="metric-label">ROI Improvement:</span>
                        <span class="metric-value" id="roiImprovementValue">+34.2%</span>
                        <div class="live-dot-small"></div>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">Risk Reduction:</span>
                        <span class="metric-value" id="riskReduction">42%</span>
                        <div class="live-dot-small"></div>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">Confidence Level:</span>
                        <span class="metric-value" id="confidenceLevel">95%</span>
                        <div class="live-dot-small"></div>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">Model Version:</span>
                        <span class="metric-value" id="modelVersion">v3.2</span>
                        <div class="live-dot-small"></div>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">Data Sources:</span>
                        <span class="metric-value" id="dataSources">15</span>
                        <div class="live-dot-small"></div>
                    </div>
                </div>

                <!-- ESG & Infrastructure Metrics -->
                <div class="climate-risk">
                    <h4>ESG & Infrastructure Intelligence‚Ñ¢ <span class="live-indicator-small">‚óè LIVE</span></h4>
                    <div class="risk-item">
                        <span class="risk-label">ESG Score:</span>
                        <span class="risk-value" id="esgScore">93.6%</span>
                        <div class="live-dot-small"></div>
                    </div>
                    <div class="risk-item">
                        <span class="risk-label">CO‚ÇÇ Tracked:</span>
                        <span class="risk-value" id="co2Tracked">1.2M</span>
                        <div class="live-dot-small"></div>
                    </div>
                    <div class="risk-item">
                        <span class="risk-label">Uptime:</span>
                        <span class="risk-value" id="uptime">99.9%</span>
                        <div class="live-dot-small"></div>
                    </div>
                    <div class="risk-item">
                        <span class="risk-label">Digital Twins:</span>
                        <span class="risk-value" id="digitalTwins">2,537</span>
                        <div class="live-dot-small"></div>
                    </div>
                    <div class="risk-item">
                        <span class="risk-label">Sim. Accuracy:</span>
                        <span class="risk-value" id="simAccuracy">99.3%</span>
                        <div class="live-dot-small"></div>
                    </div>
                </div>

                <!-- Enhanced Presentation Controls -->
                <div class="presentation-controls">
                    <button class="control-btn" id="playPauseBtn">
                        <span id="playPauseIcon">‚è∏Ô∏è</span>
                        <span id="playPauseText">Pause</span>
                    </button>
                    <div class="nav-buttons">
                        <button class="nav-btn" id="prevBtn">‚Üê Previous</button>
                        <button class="nav-btn" id="nextBtn">Next ‚Üí</button>
                    </div>
                    <div class="scroll-buttons">
                        <button class="scroll-btn" id="scrollUpBtn">‚Üë Scroll Up</button>
                        <button class="scroll-btn" id="scrollDownBtn">‚Üì Scroll Down</button>
                    </div>
                    
                    <!-- Mapbox toggle button removed - no longer needed -->
                </div>

                <!-- Enhanced Progress Indicators -->
                <div class="progress-indicators">
                    <div class="indicator active" data-section="0"></div>
                    <div class="indicator" data-section="1"></div>
                    <div class="indicator" data-section="2"></div>
                    <div class="indicator" data-section="3"></div>
                    <div class="indicator" data-section="4"></div>
                    <div class="indicator" data-section="5"></div>
                    <div class="indicator" data-section="6"></div>
                </div>
            </aside>

            <!-- Enhanced Visualization Area -->
            <div class="visualization-area">
                <!-- Enhanced 3D Point Cloud Scene -->
                <div class="scene-container" id="pointCloudScene"></div>
                
                <!-- Mapbox containers and controls removed - no longer needed -->
                
                <!-- Enhanced Performance Overlays -->
                <div class="performance-overlay" id="performanceOverlay">
                    <div class="performance-card" id="performanceCard">
                        <h3 id="selectedComponent">Building Overview</h3>
                        <div class="performance-stats">
                            <div class="perf-stat">
                                <div class="perf-icon">üî•</div>
                                <div class="perf-details">
                                    <span class="perf-label">Energy Consumption</span>
                                    <span class="perf-value" id="energyConsumption">2,850 kWh</span>
                                </div>
                            </div>
                            <div class="perf-stat">
                                <div class="perf-icon">üå°Ô∏è</div>
                                <div class="perf-details">
                                    <span class="perf-label">Thermal Performance</span>
                                    <span class="perf-value" id="thermalPerf">18.5¬∞C avg</span>
                                </div>
                            </div>
                            <div class="perf-stat">
                                <div class="perf-icon">üí∞</div>
                                <div class="perf-details">
                                    <span class="perf-label">Maintenance Cost</span>
                                    <span class="perf-value" id="maintCost">¬£12,500</span>
                                </div>
                            </div>
                            <div class="perf-stat">
                                <div class="perf-icon">‚ö†Ô∏è</div>
                                <div class="perf-details">
                                    <span class="perf-label">Risk Level</span>
                                    <span class="perf-value" id="riskLevel">Medium</span>
                                </div>
                            </div>
                            <div class="perf-stat">
                                <div class="perf-icon">üå±</div>
                                <div class="perf-details">
                                    <span class="perf-label">Carbon Credits</span>
                                    <span class="perf-value" id="carbonValue">2.4 tCO‚ÇÇe</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Enhanced Chart Overlays -->
                <div class="charts-overlay" id="chartsOverlay">
                    <div class="chart-container" id="segmentationChart">
                        <canvas id="segmentCanvas"></canvas>
                    </div>
                    <div class="chart-container" id="thermalChart">
                        <canvas id="thermalCanvas"></canvas>
                    </div>
                    <div class="chart-container" id="componentsChart">
                        <canvas id="componentsCanvas"></canvas>
                    </div>
                    <div class="chart-container" id="roiChart">
                        <canvas id="roiCanvas"></canvas>
                    </div>
                    <div class="chart-container" id="climateChart">
                        <canvas id="climateCanvas"></canvas>
                    </div>
                </div>

                <!-- Enhanced 3D Legend -->
                <div class="legend-overlay" id="legendOverlay">
                    <div class="legend-content">
                        <h4>Climate-Aware Segmentation</h4>
                        <div class="legend-items">
                            <div class="legend-item">
                                <div class="legend-color" style="background: #3B82F6;"></div>
                                <span>High-Loss Walls (85k points)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #10B981;"></div>
                                <span>Solar-Ready Roof (45k points)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #F59E0B;"></div>
                                <span>Thermal Windows (25k points)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8B5CF6;"></div>
                                <span>Smart HVAC (35k points)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #10B981;"></div>
                                <span>Insulated Floor (60k points)</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Carbon Credit NFT Display -->
                <div class="carbon-nft-overlay" id="carbonNFTOverlay">
                    <div class="nft-card">
                        <h4>üå± Carbon Credit NFT</h4>
                        <div class="nft-details">
                            <div class="nft-item">
                                <span>Segment ID:</span>
                                <span id="nftSegmentId">WALL_001</span>
                            </div>
                            <div class="nft-item">
                                <span>Verified Savings:</span>
                                <span id="nftSavings">1.2 tCO‚ÇÇe</span>
                            </div>
                            <div class="nft-item">
                                <span>Market Value:</span>
                                <span id="nftValue">¬£1,440</span>
                            </div>
                            <div class="nft-item">
                                <span>Blockchain:</span>
                                <span id="nftBlockchain">Ethereum</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Loading Indicator -->
                <div class="loading-overlay" id="loadingOverlay">
                    <div class="loading-content">
                        <div class="loading-spinner"></div>
                        <div class="loading-text">Initializing SAM-GNN Pipeline...</div>
                        <div class="loading-progress">
                            <div class="progress-bar" id="loadingProgress"></div>
                        </div>
                    </div>
                </div>

                <!-- Enhanced Export Panel -->
                <div class="export-panel" id="exportPanel">
                    <button class="export-btn" id="exportBtn">
                        <span>üìä</span>
                        Export Analysis
                    </button>
                    <button class="export-btn" id="carbonExportBtn">
                        <span>üå±</span>
                        Mint Carbon NFT
                    </button>
                    <button class="export-btn" id="presentationExportBtn">
                        <span>üìã</span>
                        Generate Report
                    </button>
                    <button class="export-btn" id="investorDemoBtn" style="background: linear-gradient(45deg, #ff6b35, #f7931e);">
                        <span>üéØ</span>
                        Investor Demo
                    </button>
                </div>
            </div>
        </main>

        <!-- Enhanced Bottom Status Bar -->
        <div class="status-bar">
            <div class="status-info">
                <span id="cameraPos">Camera: (0, 200, 300)</span>
                <span id="selectedPoints">Selected: 0 points</span>
                <span id="renderStats">FPS: 60 | Objects: 1,250,000</span>
                <span id="carbonCredits">Carbon Credits: 2.4 tCO‚ÇÇe</span>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>