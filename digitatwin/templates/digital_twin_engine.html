<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>RetrofitForge-AI Digital Twin Engine - Investor Demo</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">

    <!-- Cesium.js -->
    <script src="https://cesium.com/downloads/cesiumjs/releases/1.132/Build/Cesium/Cesium.js"></script>
    <link href="https://cesium.com/downloads/cesiumjs/releases/1.132/Build/Cesium/Widgets/widgets.css" rel="stylesheet">

    <!-- Application CSS -->
    <link href="static/digital_twin_styles.css?v=2" rel="stylesheet">
    <link href="static/digital_twin_animations.css" rel="stylesheet">
    <link href="static/premium-features.css" rel="stylesheet">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen active">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h2>üî¨ Initializing Digital Twin Engine</h2>
            <p>Loading STGNN‚Ñ¢ technology...</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="loading-stats">
                <span id="loadingStatus">Connecting to Cesium Ion...</span>
            </div>
        </div>
    </div>

    <!-- Main Application Container -->
    <div id="cesiumContainer" class="cesium-container"></div>

    <!-- UI Overlays -->
    <div class="ui-overlay">
        <!-- Logo and Patent Badge -->
        <div class="brand-section">
            <img src="static/retrofitforge-logo.png" alt="RetrofitForge-AI Logo" class="company-logo">
            <div class="patent-badge">
                üî¨ Patent-Pending STGNN‚Ñ¢
            </div>
        </div>

        <!-- Metrics Dashboard -->
        <div class="metrics-dashboard">
            <div class="metric-card primary">
                <div class="metric-value" id="activeModels">2,537</div>
                <div class="metric-label">ACTIVE MODELS</div>
                <div class="metric-trend">+12% this month</div>
            </div>
            <div class="metric-card highlight">
                <div class="metric-value" id="accuracy">96.8%</div>
                <div class="metric-label">SIMULATION ACCURACY</div>
                <div class="metric-trend">Patent-pending</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="processing">2.2s</div>
                <div class="metric-label">PROCESSING SPEED</div>
                <div class="metric-trend">Real-time</div>
            </div>
        </div>

        <!-- Building Information Panel -->
        <div class="building-info-panel" id="buildingInfo">
            <h3>üè¢ Digital Twin Analysis</h3>
            <div class="building-details">
                <p><strong>Building:</strong> <span id="buildingName">22 Bishopsgate, London EC2</span></p>
                <p><strong>Type:</strong> <span id="buildingType">Commercial Office Tower</span></p>
                <p><strong>Height:</strong> <span id="buildingHeight">278m, 62 floors</span></p>
                <p><strong>Floor Area:</strong> <span id="floorArea">121,000 m¬≤</span></p>
                <p><strong>Analysis Status:</strong> <span class="status-complete">96.8% Complete</span></p>
            </div>
            <div class="analysis-metrics">
                <div class="metric-row">
                    <span class="metric-icon">üî¨</span>
                    <span>Components Identified: <strong>1,847</strong></span>
                </div>
                <div class="metric-row">
                    <span class="metric-icon">‚ö°</span>
                    <span>Energy Savings: <strong>¬£274,000/year</strong></span>
                </div>
                <div class="metric-row">
                    <span class="metric-icon">üå±</span>
                    <span>CO‚ÇÇ Reduction: <strong>1,430 tCO‚ÇÇe/year</strong></span>
                </div>
                <div class="metric-row">
                    <span class="metric-icon">üìà</span>
                    <span>ROI Improvement: <strong>+34.2%</strong></span>
                </div>
            </div>
        </div>

        <!-- Live Analysis Panel -->
        <div class="live-analysis-panel" id="liveAnalysis">
            <h3>üî¨ Live STGNN Analysis</h3>
            <div class="component-analysis">
                <div class="component-row">
                    <span class="component-color wall"></span>
                    <span>Structural Walls</span>
                    <span class="component-count">847 elements</span>
                    <span class="component-efficiency">94.2%</span>
                </div>
                <div class="component-row">
                    <span class="component-color roof"></span>
                    <span>Roof Systems</span>
                    <span class="component-count">234 elements</span>
                    <span class="component-efficiency">91.7%</span>
                </div>
                <div class="component-row">
                    <span class="component-color window"></span>
                    <span>Windows/Glazing</span>
                    <span class="component-count">456 elements</span>
                    <span class="component-efficiency">88.9%</span>
                </div>
                <div class="component-row">
                    <span class="component-color hvac"></span>
                    <span>HVAC Systems</span>
                    <span class="component-count">189 elements</span>
                    <span class="component-efficiency">85.4%</span>
                </div>
                <div class="component-row">
                    <span class="component-color floor"></span>
                    <span>Floor Systems</span>
                    <span class="component-count">121 elements</span>
                    <span class="component-efficiency">92.1%</span>
                </div>
            </div>
            <div class="analysis-summary">
                <div class="summary-card">
                    <h4>Carbon Impact</h4>
                    <p class="large-metric">1,430 tCO‚ÇÇe</p>
                    <p class="metric-description">Annual reduction potential</p>
                </div>
                <div class="summary-card">
                    <h4>Investment ROI</h4>
                    <p class="large-metric">+34.2%</p>
                    <p class="metric-description">STGNN optimization</p>
                </div>
            </div>
        </div>

        <!-- Main Control Panel -->
        <div class="main-control-panel">
            <!-- Navigation Controls -->
            <div class="nav-controls">
                <button class="nav-btn" id="prevSection">‚Üê Previous</button>
                <button class="nav-btn" id="nextSection">Next ‚Üí</button>
            </div>
            
            <!-- Presentation Info -->
            <div class="presentation-info">
                <div class="section-title" id="sectionTitle">Digital Twin Engine</div>
                <div class="section-progress">
                    <span id="currentSection">1</span> / <span id="totalSections">7</span>
                </div>
            </div>
            
            <!-- Action Controls -->
            <div class="action-controls">
                <button class="action-btn primary" id="startPresentation">üé¨ Start</button>
                <button class="action-btn" id="pausePresentation">‚è∏Ô∏è Pause</button>
                <button class="action-btn voice-btn" id="voiceSwitcherBtn">üéôÔ∏è Voice</button>
                <button class="action-btn" id="fullscreenMode">üñ•Ô∏è Fullscreen</button>
                <button class="action-btn" id="exportReport">üìä Export</button>
                <button class="action-btn close-btn" id="closeDemo">‚úï Close</button>
            </div>
        </div>

        <!-- Screen Toggle Controls -->
        <div class="screen-toggle-controls">
            <button class="toggle-btn active" id="pointCloudView" data-view="pointcloud">
                <span class="toggle-icon">‚òÅÔ∏è</span>
                <span class="toggle-label">Point Cloud</span>
            </button>
            <button class="toggle-btn" id="digitalTwinView" data-view="digitaltwin">
                <span class="toggle-icon">üè¢</span>
                <span class="toggle-label">Digital Twin</span>
            </button>
            <button class="toggle-btn" id="homeView" data-view="home">
                <span class="toggle-icon">üè†</span>
                <span class="toggle-label">Home</span>
            </button>
        </div>
    </div>

    <!-- Demo Narration Overlay -->
    <div class="narration-overlay" id="narrationOverlay">
        <div class="narration-content">
            <div class="narration-text" id="narrationText"></div>
            <div class="narration-progress">
                <div class="progress-bar-mini">
                    <div class="progress-fill-mini" id="narrationProgress"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Application Scripts -->
    <script src="static/cesium-config.js"></script>
    <script src="static/elevenlabs-config.js"></script>
    <script src="static/voice-switcher.js"></script>
    <script src="static/digital_twin_engine.js"></script>
    <script src="static/investor_presentation.js"></script>
    <script src="static/premium-features.js"></script>

    <!-- Application Initialization -->
    <script>
        // Initialize the Digital Twin Engine
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üöÄ Starting RetrofitForge-AI Digital Twin Engine...');

            // Initialize core engine
            const digitalTwin = new DigitalTwinEngine();
            digitalTwin.initialize();

            // Initialize voice switcher
            console.log('üéôÔ∏è Creating voice switcher...');
            const voiceSwitcher = new VoiceSwitcher();
            console.log('üéôÔ∏è Voice switcher created:', voiceSwitcher);
            voiceSwitcher.createVoiceSwitcher();
            console.log('üéôÔ∏è Voice switcher panel created');
            voiceSwitcher.addToggleButton();
            console.log('üéôÔ∏è Voice switcher fully initialized');

            // Setup premium investor presentation with advanced features
            const premiumPresentation = new PremiumInvestorPresentation(digitalTwin);
            
            // Initialize premium features (add your ElevenLabs API key here)
            premiumPresentation.initializePremiumFeatures();
            
            // Make presentation available globally for button clicks
            window.investorPresentation = premiumPresentation;
            
            // Add premium start button
            const startPremiumBtn = document.getElementById('startPresentation');
            if (startPremiumBtn) {
                startPremiumBtn.addEventListener('click', () => {
                    premiumPresentation.startWithPremiumFeatures();
                });
            }

            console.log('‚úÖ Premium Digital Twin Engine ready for investor demo');
            console.log('üéôÔ∏è Premium AI Narration: Ready (add ElevenLabs API key for full features)');
            console.log('ü§ñ AI Commentary System: Ready');
            console.log('üìä Predictive Analytics: Ready');
            console.log('üåê Multi-Modal Data Fusion: Ready');
            console.log('üå± Blockchain Carbon Credits: Ready');
            console.log('üìà ESG Compliance Tracking: Ready');
            console.log('üí∞ Real-Time ROI Calculator: Ready');
        });
    </script>
</body>
</html>